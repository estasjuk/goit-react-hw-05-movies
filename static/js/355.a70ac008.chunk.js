"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[355],{856:function(e,t,r){r.d(t,{Z:function(){return h}});var n=r(791),a="MovieList_wrapper__B36Qa",s="MovieList_MovieList__92Iqv",i=r(87),c=r(689),u={MovieListImage:"MovieListItem_MovieListImage__9S96S",MovieListLink:"MovieListItem_MovieListLink__Vawhv",MovieListItemTitle:"MovieListItem_MovieListItemTitle__uQhAH"},o=r(184),l=function(e){var t=e.title,r=e.img,n=e.id,a=(0,c.TH)();return(0,o.jsx)("li",{className:u.MovieListItem,children:(0,o.jsxs)(i.rU,{className:u.MovieListLink,to:"/movies/".concat(n),state:{from:a},children:[(0,o.jsx)("img",{className:u.MovieListImage,src:r?"https://image.tmdb.org/t/p/original".concat(r):"https://ik.imagekit.io/tc8jxffbcvf/default-movie-portrait_EmJUj9Tda5wa.jpg?tr=fo-auto,di-",alt:t,loading:"lazy"}),(0,o.jsx)("h4",{children:t})]})})},f=function(e){var t=e.movies.map((function(e){var t=e.id,r=e.title,n=e.poster_path;return(0,o.jsx)(l,{id:t,title:r,img:n},t)}));return(0,o.jsx)("div",{className:a,children:(0,o.jsx)("ul",{className:s,children:t})})},h=(0,n.memo)(f);f.defaultProps={movies:[]}},355:function(e,t,r){r.r(t),r.d(t,{default:function(){return Z}});var n=r(433),a=r(861),s=r(439),i=r(757),c=r.n(i),u=r(791),o=r(87),l="MoviesSearch_App__Blxcf",f=function(e){var t=(0,u.useState)(""),r=(0,s.Z)(t,2),n=r[0],a=r[1];return{search:n,setSearch:a,handleChange:function(e){var t=e.target;a(t.value.toLowerCase())},handleSubmit:function(t){t.preventDefault(),e(n),a("")}}},h="Searchbar_Searchbar__CAPuq",m="Searchbar_SearchForm__rCrnC",p="Searchbar_SearchFormButton__BDAso",v="Searchbar_SearchFormButtonLabel__V9HsJ",d="Searchbar_SearchFormInput__O-hBT",_=r(184),g=function(e){var t=e.onSubmit,r=f(t),n=r.search,a=r.handleChange,s=r.handleSubmit;return(0,_.jsx)("header",{className:h,children:(0,_.jsxs)("form",{className:m,onSubmit:s,children:[(0,_.jsx)("button",{type:"submit",className:p,children:(0,_.jsx)("span",{className:v,children:"Search"})}),(0,_.jsx)("input",{className:d,onChange:a,value:n,name:"search",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search movies",required:!0})]})})},x=(0,u.memo)(g),b=r(856),S=r(724),j=r(138),k="Button_Button__JIlWZ",L=function(e){var t=e.onClick;return(0,_.jsx)("button",{type:"button",onClick:t,className:k,children:"Load more"})},w=function(){var e=(0,u.useState)([]),t=(0,s.Z)(e,2),r=t[0],i=t[1],f=(0,u.useState)(!1),h=(0,s.Z)(f,2),m=h[0],p=h[1],v=(0,u.useState)(null),d=(0,s.Z)(v,2),g=d[0],k=d[1],w=(0,u.useState)(!1),Z=(0,s.Z)(w,2),M=Z[0],y=Z[1],C=(0,o.lr)(),N=(0,s.Z)(C,2),I=N[0],B=N[1],T=I.get("search"),F=I.get("page");(0,u.useEffect)((function(){var e=function(e){var t=e.page,r=e.total_results,n=e.results;1===t&&r>20&&y(!0),0===r?y(!1):n.length<20&&(alert("Oops! This is a finish, try something else"),y(!1))};if(T){var t=function(){var t=(0,a.Z)(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p(!0),t.next=4,(0,S.DX)(T,F);case 4:r=t.sent,i((function(e){return[].concat((0,n.Z)(e),(0,n.Z)(r.results))})),e(r),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),k(t.t0.message);case 12:return t.prev=12,p(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[0,9,12,15]])})));return function(){return t.apply(this,arguments)}}();t()}}),[T,F]);var D=(0,u.useCallback)((function(){B({search:T,page:Number(F)+1})}),[F,T,B]);return(0,_.jsxs)("div",{className:l,children:[(0,_.jsx)(x,{onSubmit:function(e){B({search:e,page:1}),i([])}}),0!==r.length&&(0,_.jsx)(b.Z,{movies:r}),m&&(0,_.jsx)(j.Z,{}),g&&(0,_.jsx)("p",{children:"Something goes wrong..."}),M&&(0,_.jsx)(L,{onClick:D})]})},Z=function(){return(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(w,{})})}},724:function(e,t,r){r.d(t,{DX:function(){return o},Df:function(){return c},L4:function(){return f},TP:function(){return u},gN:function(){return l}});var n=r(861),a=r(757),s=r.n(a),i=r(912).Z.create({baseURL:"https://api.themoviedb.org/3",params:{api_key:"a7a8c3125d3bc96af718eb60f4553f10"}}),c=function(){var e=(0,n.Z)(s().mark((function e(){var t,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("/trending/movie/day");case 2:return t=e.sent,r=t.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("/movie/".concat(t));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n,a,c=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:1,e.next=3,i.get("/search/movie",{params:{query:t,page:r}});case 3:return n=e.sent,a=n.data,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("/movie/".concat(t,"/credits"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,n.Z)(s().mark((function e(t){var r,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.get("/movie/".concat(t,"/reviews"));case 2:return r=e.sent,n=r.data,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=355.a70ac008.chunk.js.map